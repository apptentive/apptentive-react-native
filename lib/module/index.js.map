{"version":3,"names":["NativeModules","Platform","DeviceEventEmitter","NativeEventEmitter","LINKING_ERROR","select","ios","default","ApptentiveModule","Proxy","get","Error","_onUnreadMessageCountChanged","_eventsRegistered","ApptentiveConfiguration","constructor","key","signature","_defineProperty","apptentiveKey","apptentiveSignature","logLevel","distributionName","distributionVersion","require","version","shouldEncryptStorage","shouldSanitizeLogMessages","shouldInheritAppTheme","ratingInteractionThrottleLength","customAppStoreURL","Apptentive","register","configuration","emitter","android","addListener","unreadMessageCountChangedEvent","e","undefined","count","engage","event","presentMessageCenter","showMessageCenter","setPersonName","name","getPersonName","setPersonEmail","email","getPersonEmail","addCustomPersonData","value","OS","addCustomPersonDataBoolean","addCustomPersonDataNumber","addCustomPersonDataString","Promise","_","reject","addCustomPersonDataBool","removeCustomPersonData","addCustomDeviceData","addCustomDeviceDataBoolean","addCustomDeviceDataNumber","addCustomDeviceDataString","addCustomDeviceDataBool","removeCustomDeviceData","canShowInteraction","canShowMessageCenter","getUnreadMessageCount","onUnreadMessageCountChanged"],"sources":["index.tsx"],"sourcesContent":["import { NativeModules, Platform, DeviceEventEmitter, NativeEventEmitter } from 'react-native';\n\nconst LINKING_ERROR =\n  `The package 'apptentive-react-native' is not linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo Go\\n';\n\n// Get the Apptentive Native Module\nconst ApptentiveModule = NativeModules.ApptentiveModule\n  ? NativeModules.ApptentiveModule\n  : new Proxy({},{ get() {\n          throw new Error(LINKING_ERROR);\n        },});\n\nlet _onUnreadMessageCountChanged: (count: number) => {};\nlet _eventsRegistered = false;\n\n///// Class Implementation\n\nexport class ApptentiveConfiguration {\n\n  apptentiveKey: string;\n  apptentiveSignature: string;\n  logLevel: string;\n  distributionName: string;\n  distributionVersion: string;\n  shouldEncryptStorage: boolean;\n  shouldSanitizeLogMessages: boolean;\n  shouldInheritAppTheme: boolean;\n  ratingInteractionThrottleLength: number;\n  customAppStoreURL: string | null;\n\n  constructor(key: string, signature: string) {\n    this.apptentiveKey = key;\n    this.apptentiveSignature = signature;\n    this.logLevel = \"info\";\n    this.distributionName = \"React Native\";\n    this.distributionVersion = require(\"../package\").version;\n    this.shouldEncryptStorage = false;\n    this.shouldSanitizeLogMessages = true;\n    this.shouldInheritAppTheme = true;\n    this.ratingInteractionThrottleLength = 604800000;\n    this.customAppStoreURL = null;\n  }\n}\n\nexport class Apptentive {\n\n  // Register the Apptentive SDK\n  static register(configuration: ApptentiveConfiguration): Promise<boolean> {\n    if (!_eventsRegistered) {\n      _eventsRegistered = true;\n\n      const emitter = Platform.select({\n        ios: () => new NativeEventEmitter(ApptentiveModule),\n        android: () => DeviceEventEmitter,\n        default: () => DeviceEventEmitter\n      })();\n\n      emitter.addListener(ApptentiveModule.unreadMessageCountChangedEvent, (e) => {\n        if (_onUnreadMessageCountChanged !== undefined) {\n          _onUnreadMessageCountChanged(e.count);\n        }\n      });\n    }\n\n    return ApptentiveModule.register(configuration);\n  }\n\n  // Engage an event by an event name string\n  static engage(event: string): Promise<boolean> {\n    return ApptentiveModule.engage(event);\n  }\n\n  // Present the Message Center\n  static presentMessageCenter(): Promise<boolean> {\n    return ApptentiveModule.showMessageCenter();\n  }\n\n  // Set person name\n  static setPersonName(name: string): Promise<boolean> {\n    return ApptentiveModule.setPersonName(name);\n  }\n\n  // Get person name\n  static getPersonName(): Promise<string> {\n    return ApptentiveModule.getPersonName();\n  }\n\n  // Set person email\n  static setPersonEmail(email: string): Promise<boolean> {\n    return ApptentiveModule.setPersonEmail(email);\n  }\n\n  // Get person name\n  static getPersonEmail(): Promise<string> {\n    return ApptentiveModule.getPersonEmail();\n  }\n\n  // Add person custom data based on key string and value of type bool, number, or string\n  static addCustomPersonData(key: string, value: any): Promise<boolean> {\n    if (Platform.OS === \"ios\") {\n      return ApptentiveModule.addCustomPersonData(key, value);\n    }\n    else if (Platform.OS === \"android\") {\n      if (typeof value === 'boolean') {\n        return ApptentiveModule.addCustomPersonDataBoolean(key, value);\n      }\n      if (typeof value === 'number') {\n        return ApptentiveModule.addCustomPersonDataNumber(key, value);\n      }\n      if (typeof value === 'string') {\n        return ApptentiveModule.addCustomPersonDataString(key, value);\n      }\n    } else {\n      // Return a default rejected Promise if platform is not supported\n      return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported platform: \" + (Platform.OS));});\n    }\n    // Return a default rejected Promise if type is not supported\n    return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported type of custom data: \" + (typeof value));});\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomPersonData() instead\n   */\n  static addCustomPersonDataBool(key: string, value: boolean) {\n    return Apptentive.addCustomPersonData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomPersonData() instead\n   */\n  static addCustomPersonDataNumber(key: string, value: number) {\n    return Apptentive.addCustomPersonData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomPersonData() instead\n   */\n  static addCustomPersonDataString(key: string, value: string) {\n    return Apptentive.addCustomPersonData(key, value);\n  }\n\n  // Remove person custom data based on key string\n  static removeCustomPersonData(key: string): Promise<boolean> {\n    return ApptentiveModule.removeCustomPersonData(key);\n  }\n\n  // Add device custom data based on key string and value of type bool, number, or string\n  static addCustomDeviceData(key: string, value: any): Promise<boolean> {\n    if (Platform.OS === \"ios\") {\n      return ApptentiveModule.addCustomDeviceData(key, value);\n    }\n    else if (Platform.OS === \"android\") {\n      if (typeof value === 'boolean') {\n        return ApptentiveModule.addCustomDeviceDataBoolean(key, value);\n      }\n      if (typeof value === 'number') {\n        return ApptentiveModule.addCustomDeviceDataNumber(key, value);\n      }\n      if (typeof value === 'string') {\n        return ApptentiveModule.addCustomDeviceDataString(key, value);\n      }\n    } else {\n      // Return a default rejected Promise if platform is not supported\n      return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported platform: \" + (Platform.OS));});\n    }\n    // Return a default rejected Promise if type is not supported\n    return new Promise<boolean>((_, reject) => {reject(\"Apptentive Error: Unsupported type of custom data: \" + (typeof value));});\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomDeviceData() instead\n   */\n  static addCustomDeviceDataBool(key: string, value: boolean) {\n    return Apptentive.addCustomDeviceData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomDeviceData() instead\n   */\n  static addCustomDeviceDataNumber(key: string, value: number) {\n    return Apptentive.addCustomDeviceData(key, value);\n  }\n\n  /**\n   * @deprecated The method should not be used. Use addCustomDeviceData() instead\n   */\n  static addCustomDeviceDataString(key: string, value: string) {\n    return Apptentive.addCustomDeviceData(key, value);\n  }\n\n  // Remove device custom data based on key string\n  static removeCustomDeviceData(key: string): Promise<boolean> {\n    return ApptentiveModule.removeCustomDeviceData(key);\n  }\n\n  // Check if an event name will launch an interaction\n  static canShowInteraction(event: string): Promise<boolean> {\n    return ApptentiveModule.canShowInteraction(event);\n  }\n\n  // Check if Message Center can be shown\n  static canShowMessageCenter(): Promise<boolean> {\n    return ApptentiveModule.canShowMessageCenter();\n  }\n\n  // Get unread message count in Message Center\n  static getUnreadMessageCount(): Promise<number> {\n    return ApptentiveModule.getUnreadMessageCount();\n  }\n\n  /**\n   * @return Current callback for the unread message count change in the Message Center.\n   */\n  static get onUnreadMessageCountChanged() {\n    return _onUnreadMessageCountChanged;\n  }\n\n  /**\n   * Sets current callback for the unread message count change in the Message Center.\n   * @param value Callback function with a single integer parameter.\n   */\n  static set onUnreadMessageCountChanged(value) {\n    _onUnreadMessageCountChanged = value;\n  }\n\n}\n"],"mappings":"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"}